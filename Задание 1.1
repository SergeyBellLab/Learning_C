/*
 ============================================================================
 Name        : 1.c
 Author      : 
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include <time.h>

// Функция для вычисления суммы цифр числа с помощью цикла
int sum_of_digits(int num) {
    int sum = 0;           // Переменная для хранения суммы цифр
    int abs_num = abs(num); // Берем модуль числа для корректной обработки отрицательных

    do {                   // Цикл до тех пор, пока число не станет 0
        sum += abs_num % 10;  // Добавляем последнюю цифру к сумме (используем для этого остаток от деления на 10)
        abs_num /= 10;        // Убираем последнюю цифру
    } while(abs_num > 0);    // Продолжаем, пока остались цифры

    return sum;
}

// Функция заполнения двумерного массива случайными числами [A, B]
void fill_array(int arr[100][100], int N, int M, int A, int B) {
    srand(time(NULL));     // Инициализация генератора случайных чисел

    for(int i = 0; i < N; i++) {       // Проходим по всем строкам
        for(int j = 0; j < M; j++) {   // Проходим по всем столбцам
            arr[i][j] = A + rand() % (B - A + 1);  // Заполняем случайным числом из [A, B]
        }
    }
}

// Функция вывода полного массива в прямоугольном виде
void print_full_array(int arr[100][100], int N, int M) {
    printf("\n    МАССИВ    \n");
    for(int i = 0; i < N; i++) {       // Проходим по строкам
        for(int j = 0; j < M; j++) {   // Проходим по столбцам
            printf("%6d ", arr[i][j]); // Выводим элемент с шириной 6 символов
        }
        printf("\n");                  // Переход на новую строку
    }
}

// Функция вывода только элементов с четной суммой цифр
void print_even_digit_sum(int arr[100][100], int N, int M) {
    printf("\n    ЭЛЕМЕНТЫ С ЧЕТНОЙ СУММОЙ ЦИФР    \n");
    for(int i = 0; i < N; i++) {              // Проходим по всем строкам
            for(int j = 0; j < M; j++) {          // Проходим по всем столбцам
                int digit_sum = sum_of_digits(arr[i][j]);  // Вычисляем сумму цифр элемента
                if(digit_sum % 2 == 0) {          // Если сумма цифр четная - выводим элемент
                    printf("%6d ", arr[i][j]);    // Выводим число с выравниванием по ширине 6
                } else {                          // Если сумма цифр нечетная
                    printf("%6s ", "");           // Выводим 6 пробелов вместо элемента
                }
            }
            printf("\n");
       }

}

int main() {
    int N, M, A, B;        // Переменные для параметров массива и диапазона

    // Ввод параметров от пользователя
    printf("Введите размеры массива N, M (макс. 100): ");
    scanf("%d %d", &N, &M);
    printf("Введите диапазон [A, B]: ");
    scanf("%d %d", &A, &B);

    // Проверка корректности входных данных
    if(N <= 0 || M <= 0 || N > 100 || M > 100 || A > B) {
        printf("ОШИБКА: Некорректные параметры!\n");
        return 1;          // Завершение с ошибкой
    }

    // Объявление двумерного массива (M <= 100)
    int matrix[100][100];

    // === ЗАПОЛНЕНИЕ МАССИВА ===
    fill_array(matrix, N, M, A, B);    // Вызов функции заполнения

    // === ВЫВОД ПОЛНОГО МАССИВА ===
    print_full_array(matrix, N, M);    // Вывод полного массива

    // === ВЫВОД ЭЛЕМЕНТОВ С ЧЕТНОЙ СУММОЙ ЦИФР ===
    print_even_digit_sum(matrix, N, M); // Вывод отфильтрованных элементов

    return 0;
}
