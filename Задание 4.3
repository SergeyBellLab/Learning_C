/*
 ============================================================================
 Name        : Задание.c
 Author      : 
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>  // Подключаем библиотеку для ввода-вывода

int main() {  // Главная функция программы
    int n, m;  // Переменные для количества строк и столбцов массива
    printf("Введите количество строк и столбцов: ");  // Выводим запрос для ввода размеров
    scanf("%d %d", &n, &m);  // Считываем количество строк и столбцов

    int array[n][m];  // Исходный двумерный массив с динамическими размерами
    printf("Введите элементы массива:\n");  // Выводим запрос для ввода элементов
    for(int i = 0; i < n; i++) {  // Проходим по всем строкам массива
        for(int j = 0; j < m; j++) {  // Проходим по всем столбцам в текущей строке
            scanf("%d", &array[i][j]);  // Считываем элемент массива
        }
    }

    // Вывод исходного массива
    printf("\nИсходный массив:\n");  // Выводим заголовок для исходного массива
    for(int i = 0; i < n; i++) {  // Проходим по строкам для вывода
        for(int j = 0; j < m; j++) {  // Проходим по столбцам для вывода
            printf("%4d ", array[i][j]);  // Выводим элемент с выравниванием по 4 символам
        }
        printf("\n");  // Переходим на новую строку после вывода строки массива
    }

    int counts[n];  // Промежуточный массив для хранения количества подходящих элементов в каждой строке
    int total_positive = 0;  // Счетчик общего количества подходящих элементов для всех строк
    //int suitable_count = 0;  // Счетчик строк, содержащих хотя бы один подходящий элемент

    // Подсчет подходящих элементов в каждой строке
    for(int i = 0; i < n; i++) {  // Проходим по всем строкам массива
        counts[i] = 0;  // Инициализируем счетчик для текущей строки нулем
        for(int j = 0; j < m; j++) {  // Проходим по всем элементам текущей строки
            if(array[i][j] > 0) {  // Проверяем, является ли элемент положительным
                int num = array[i][j];  // Сохраняем текущий элемент в переменную
                int digit_sum = 0;  // Переменная для суммы цифр числа
                while(num > 0) {  // Цикл для подсчета суммы цифр
                    digit_sum += num % 10;  // Добавляем последнюю цифру к сумме
                    num /= 10;  // Убираем последнюю цифру из числа
                }
               // total_positive++;
                if(digit_sum > 3) {  // Проверяем, больше ли сумма цифр 3
                    counts[i]++;  // Увеличиваем счетчик подходящих элементов в строке
                   total_positive++;  // Увеличиваем общий счетчик подходящих элементов
                   // suitable_count++;  // Увеличиваем счетчик строк с подходящими элементами
                }
            }
        }
    }

    // Вывод промежуточного массива
    printf("\nКоличество подходящих элементов в строках:\n");  // Заголовок для промежуточного массива
    for(int i = 0; i < n; i++) {  // Проходим по всем строкам
        printf("%4d ", counts[i]);  // Выводим количество подходящих элементов в строке
    }
    printf("\n");  // Переходим на новую строку после вывода

    // Вычисление и вывод среднего значения
    double average = 0;  // Переменная для хранения среднего значения
    if(n > 0) {  // Проверяем, есть ли строки с подходящими элементами
        average = (double)total_positive / n;  // Вычисляем среднее как целочисленное деление с приведением к double
    }
    printf("\nСреднее количество положительных элементов с суммой цифр > 3: %.2f\n", average);  // Выводим результат с 2 знаками после запятой

    return 0;  // Завершаем программу успешно
}

